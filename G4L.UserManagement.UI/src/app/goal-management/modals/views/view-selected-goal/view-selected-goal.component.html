<div class="container-fluid m-0 p-0">
  <div class="card m-0 p-2">
    <div class="card-header border-bottom p-3">
      <div class="row align-items-center m-0">
        <div class="col-8 p-0">
          <div>
            <h6 class="mb-0 text-muted">GOAL</h6>
          </div>
        </div>
        <div class="col-4 text-end p-0">
          <a class="cursor-pointer" (click)="onCloseModal()">
            <i class="fa-solid fa-xmark"></i
          ></a>
        </div>
      </div>
    </div>
    <div class="card-body">
      <h5 class="heading-small mb-4">
        <strong>{{ goal?.title | uppercase }}</strong>
      </h5>
      <div class="row">
        <div class="col-3">
          <h6>Status:</h6>
        </div>
        <div
          class="col-2 text-sm-center rounded text-white"
          [ngClass]="{
            backlogBackgroundColor: goalStatus === 'backlog',
            archivedBackgroundColor: goalStatus === 'archived',
            completedBackgroundColor: goalStatus === 'completed',
            pausedBackgroundColor: goalStatus === 'paused',
            startedBackgroundColor: goalStatus === 'started'
          }"
        >
          {{ goal?.goalStatus | titlecase }}
        </div>
      </div>
      <div class="row">
        <div class="col-3"><h6>Estimated time:</h6></div>
        <div class="col-2">
          <h6>{{ goal?.duration }}</h6>
        </div>
      </div>
      <div class="row">
        <div class="col-3"><h6>Progress:</h6></div>
        <div class="col-2">
          <h6>{{ goalProgress | percent }}</h6>
        </div>
      </div>
      <p>
        <ngb-progressbar
          type="warning"
          [value]="goalProgressValue"
          [striped]="true"
          [animated]="true"
          ><i>{{ goalProgress | percent }}</i></ngb-progressbar
        >
      </p>
      <!-- Descriptions -->
      <h6 class="heading-small text-muted mb-1">DESCRIPTION</h6>
      <div class="col-lg-12">
        {{ goal?.description }}
      </div>

      <!-- Add Task Component here -->
      <app-tasks
        *ngIf="goal?.tasks"
        [goal]="goal"
        [viewType]="'view'"
        [goalStatus]="goal.goalStatus"
      ></app-tasks>

      <!-- Action buttons -->
      <div class="row mt-3" *ngIf="goalStatus !== 'completed'">
        <hr class="horizontal dark my-4" />
        <div class="col-8">
          <a class="btn btn-sm bg-2 gradient-primary mb-0 btn-dark">
            <i class="fa-solid fa-pen"></i>&nbsp;&nbsp;ADD MORE
            TIME&nbsp;&nbsp;</a
          >
        </div>
        <div class="col-4 text-end">
          <div>
            <a
              class="btn btn-sm bg-2 gradient-primary mb-0 btn-dark dropdown-toggle"
              id="dropdownAction"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              &nbsp;&nbsp;ACTION GOAL&nbsp;&nbsp;
              <i aria-hidden="true" class="fa fa-caret-down text-xs"></i>
            </a>
            <div class="dropdown-menu" aria-labelledby="dropdown">
              <a
                class="dropdown-item"
                *ngIf="goalStatus === 'backlog' || goalStatus === 'paused'"
              >
                <i class="fa-solid fa-play text-xs"></i>&nbsp;&nbsp;Start the
                goal&nbsp;&nbsp;</a
              >

              <a
                class="dropdown-item"
                *ngIf="goalStatus === 'started' && goalProgressValue === 100"
              >
                <i class="fa-solid fa-play text-xs"></i>&nbsp;&nbsp;Complete
                goal&nbsp;&nbsp;</a
              >
              <a class="dropdown-item" *ngIf="goalStatus === 'started'">
                <i class="fa-solid fa-play text-xs"></i>&nbsp;&nbsp;Pause
                goal&nbsp;&nbsp;</a
              >
              <a class="dropdown-item" *ngIf="goalStatus === 'archived'">
                <i class="fa-solid fa-play text-xs"></i>&nbsp;&nbsp;Restart
                goal&nbsp;&nbsp;</a
              >
              <a
                class="dropdown-item"
                *ngIf="goalStatus === 'started' || goalStatus === 'paused'"
              >
                <i class="fa-solid fa-archive text-xs"></i>&nbsp;&nbsp;Archive
                goal&nbsp;&nbsp;</a
              >
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
